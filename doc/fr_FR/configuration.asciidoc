Le plugin SMS permet de dialoguer avec Jeedom par l'intermediaire des SMS, il permet aussi à Jeedom de vous envoyé un SMS en cas d'alerte (plugin alarme, scénario...)

[icon="../images/plugin/important.png"]
[IMPORTANT]
Pour dialoguer avec Jeedom il faut avoir configurer des intéractions

==== Configuration du plugin

Après téléchargement du plugin, il vous suffit de l'activer et de configurer le port, après sauvegarde le démon devrait se lancer. Le plugin est déjà configuré par défaut ; vous n'avez donc rien à faire de plus. Cependant vous pouvez modifier cette configuration.
Voici le détail (certains paramètres peuvent n'être visibles qu'en mode expert) :

image::../images/sms1.png[]

* *Configuration* : cette partie vous donne le statut du démon (aussi bien en local qu'en déporté).
[icon="../images/plugin/tip.png"]
[TIP]
Si vous êtes en mode déporté, le démon local peut être arrêté, c'est tout à fait normal.

* *Général* : cette partie permet de configurer les paramètres généraux du plugin.
* *Démon local* ou *Démon XXX* : paramètres de configuration locale (ou déportée, en fonction de l'intitulé) du démon.
** _Port SMS_ : le port USB sur lequel votre clef GSM est connectée.
[icon="../images/plugin/tip.png"]
[TIP]
Si vous ne savez pas quel port USB est utilisé, vous pouvez simplement indiquer "Auto". Attention le mode auto ne marche qu'avec les clef Huawai e220 
[icon="../images/plugin/important.png"]
[IMPORTANT]
Attention certain clef 3G sont par defaut en mode modem et non GSM, il faut à l'aide du logiciel de votre fabricant de clef changer le mode de la clef sur GSM (ou texte, ou série)
** _Code pin_ : Permet d'indiquer le code pin de la carte SIM, à laisser vide si vous n'en avez pas
** _Texte mode_ : Mode de compatibilité étendu, à n'utiliser que si l'envoi ou la réception de messages ne marche pas
** _Découper les messages par paquet de caractères_ : Indique le nombre de caracteres maximum par texto
** _Passerelle SMS / SMS Gateway (modifer cas d'erreur : CMS 330 SMSC number not set)_ : A ne changer que si vous avez l'erreur "CMS 330 SMSC number not set", dans ce cas il faut indiquer le numéro de passerelle SMS de votre opérateur téléphonique
** _Force du signal_ : Force de reception du signal de votre clef GSM
** _Réseaux_ : Réseaux téléphonique de votre clef GSM (peut etre à "None" si Jeedom n'arrive pas a le récuperer)
** _Port socket interne (modification dangereuse, doit être la même valeur sur tous les Jeedom déportés SMS)_ : permet de modifier le port de communication interne du démon.
[icon="../images/plugin/important.png"]
[IMPORTANT]
A ne changer que si vous savez ce que vous faites.
** _Gestion du démon_ : vous retrouvez ici les boutons de gestion du démon : 
*** Redémarrer : permet de redémarrer le démon en mode normal.
*** Arrêter : force l'arrêt du démon (attention cette option place le port sur l'option "Aucun" également).
*** Lancer en mode debug : cette option lance le démon en mode debug. Cette option peut être utile pour voir, si c'est le cas, pourquoi le démon plante ou ne remonte pas une valeur.
[icon="../images/plugin/important.png"]
[IMPORTANT]
Dans ce mode, le démon est très bavard. Une fois le debug terminé, il ne faut pas oublier de cliquer sur "Redémarrer" pour sortir du mode debug !! : 

image::../images/sms2.png[]

==== Configuration des équipements

La configuration des équipements SMS est accessible à partir du menu plugin : 

image::../images/sms4.png[]

Voilà à quoi ressemble la page du plugin SMS (ici avec déjà 1 équipements) : 

image::../images/sms3.png[]

[icon="../images/plugin/tip.png"]
[TIP]
Comme à beaucoup d'endroit sur Jeedom, mettre la souris tout à gauche permet de faire apparaître un menu d'accès rapide (vous pouvez à partir de votre profils le laisser toujours visible)

Une fois que vous cliquez sur l'un d'eux, vous obtenez : 

image::../images/sms5.png[]


Vous retrouvez ici toute la configuration de votre équipement : 

* Nom de l'équipement SMS : nom de votre équipement SMS
* Activer : permet de rendre votre équipement actif
* Visible : le rend visible sur le dashboard
* Objet parent : indique l'objet parent auquel appartient l'équipement

En dessous vous retrouvez la liste des commandes : 

* le nom affiché sur le dashboard
* utilisateur : utilisateur correspondant dans Jeedom (permet de restreint certaine interaction à certain utilisateur)
* numéro : numéro de téléphone à qui envoyer les messages
[icon="../images/plugin/important.png"]
[IMPORTANT]
Seul les numéros de téléphone déclarant dans un équipement pouront utiliser les intéractions car seul eux sont autorisés
* afficher : permet d'afficher la donnée sur le dashboard
* configuration avancée (petites roues crantées) : permet d'afficher la configuration avancée de la commande (méthode d'historisation, widget...)
* Tester : permet de tester la commande
* supprimer (signe -) : permet de supprimer la commande





























Celui-ci est assez standard dans son fonctionnement, sur la page Générale -> Plugin puis en selectionnant le plugin SMS : 

- Le port (chemin) jusqu’au périphérique qui sert de modem (chez moi c’est /dev/ttyUSB0, pour le voir il suffit de lancer “dmesg” puis de brancher le modem)
- Le code pin de la carte sim
 

Puis ajoute un nouvel équipement puis on configure celui-ci :

image::../images/sms_screenshot1.JPG[]

- Le nom de celui-ci
- S’il est actif ou non
Puis il faut ajouter les commandes qui seront composées d’un nom et d’un numéro, seuls les numéros listés dans la liste 
des commandes peuvent recevoir une réponse de Jeedom (ça permet de sécuriser tout en évitant de mettre un mot de passe à 
chaque début de SMS que j’envoie à Jeedom). Vous pouvez aussi indiquer quel utilisateur est liée à ce numéro (pour la gestion des droits
au niveau des intéractions)

Pour communiquer avec Jeedom il suffira juste de lui envoyer un message à partir d’un numéro autorisé, toutes les interactions viennent du système d’interaction .

Petit exemple d’interaction :
Question : “Quelle est la température de la chambre ?”
Réponse  : “16.3 C”
